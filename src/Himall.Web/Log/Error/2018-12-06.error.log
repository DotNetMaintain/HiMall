


 记录时间：2018-12-06 10:57:17,060 
日志级别：  ERROR 
出错类：Himall.Web.Areas.Mobile.Controllers.PaymentController.Pay  
错误描述：支付页面加载支付插件出错： 

System.ArgumentOutOfRangeException: 长度不能小于 0。
参数名: length
   在 System.String.Substring(Int32 startIndex, Int32 length)
   在 Himall.Plugin.Payment.Alipay.Base.Submit.ParseResponse(String strText, Config _config)
   在 Himall.Plugin.Payment.Alipay_WAP.Service.GetRequestUrl(String returnUrl, String notifyUrl, String orderId, Decimal totalFee, String productInfo, String openId)
   在 Himall.Web.Areas.Mobile.Controllers.PaymentController.Pay(String pmtid, String ids) 位置 E:\合作项目\mall\Himall3.0\src\Himall.Web\Areas\Mobile\Controllers\PaymentController.cs:行号 159



 记录时间：2018-12-06 13:04:17,691 
日志级别：  ERROR 
出错类：Himall.Web.Areas.Mobile.Controllers.PaymentController.Pay  
错误描述：支付页面加载支付插件出错： 

System.ApplicationException: 预支付失败：JSAPI支付必须传openid
   在 Himall.Plugin.Payment.WeiXinPay.Service.GetRequestUrl(String returnUrl, String notifyUrl, String orderId, Decimal totalFee, String productInfo, String openId)
   在 Himall.Web.Areas.Mobile.Controllers.PaymentController.Pay(String pmtid, String ids) 位置 E:\合作项目\mall\Himall3.0\src\Himall.Web\Areas\Mobile\Controllers\PaymentController.cs:行号 159



 记录时间：2018-12-06 13:14:59,477 
日志级别：  ERROR 
出错类：Himall.Web.Areas.Mobile.Controllers.PaymentController.Pay  
错误描述：支付页面加载支付插件出错： 

System.ApplicationException: 预支付失败：JSAPI支付必须传openid
   在 Himall.Plugin.Payment.WeiXinPay.Service.GetRequestUrl(String returnUrl, String notifyUrl, String orderId, Decimal totalFee, String productInfo, String openId)
   在 Himall.Web.Areas.Mobile.Controllers.PaymentController.Pay(String pmtid, String ids) 位置 E:\合作项目\mall\Himall3.0\src\Himall.Web\Areas\Mobile\Controllers\PaymentController.cs:行号 159



 记录时间：2018-12-06 13:20:27,699 
日志级别：  ERROR 
出错类：Himall.Web.Areas.Mobile.Controllers.PaymentController.Pay  
错误描述：支付页面加载支付插件出错： 

System.ApplicationException: 预支付失败：JSAPI支付必须传openid
   在 Himall.Plugin.Payment.WeiXinPay.Service.GetRequestUrl(String returnUrl, String notifyUrl, String orderId, Decimal totalFee, String productInfo, String openId)
   在 Himall.Web.Areas.Mobile.Controllers.PaymentController.Pay(String pmtid, String ids) 位置 E:\合作项目\mall\Himall3.0\src\Himall.Web\Areas\Mobile\Controllers\PaymentController.cs:行号 159



 记录时间：2018-12-06 13:27:23,748 
日志级别：  ERROR 
出错类：Himall.Web.Areas.Mobile.Controllers.PaymentController.Pay  
错误描述：支付页面加载支付插件出错： 

System.ApplicationException: 预支付失败：JSAPI支付必须传openid
   在 Himall.Plugin.Payment.WeiXinPay.Service.GetRequestUrl(String returnUrl, String notifyUrl, String orderId, Decimal totalFee, String productInfo, String openId)
   在 Himall.Web.Areas.Mobile.Controllers.PaymentController.Pay(String pmtid, String ids) 位置 E:\合作项目\mall\Himall3.0\src\Himall.Web\Areas\Mobile\Controllers\PaymentController.cs:行号 159



 记录时间：2018-12-06 13:41:47,472 
日志级别：  ERROR 
出错类：Himall.Web.Areas.Mobile.Controllers.PaymentController.Pay  
错误描述：支付页面加载支付插件出错： 

System.ApplicationException: 预支付失败：JSAPI支付必须传openid
   在 Himall.Plugin.Payment.WeiXinPay.Service.GetRequestUrl(String returnUrl, String notifyUrl, String orderId, Decimal totalFee, String productInfo, String openId)
   在 Himall.Web.Areas.Mobile.Controllers.PaymentController.Pay(String pmtid, String ids) 位置 E:\合作项目\mall\Himall3.0\src\Himall.Web\Areas\Mobile\Controllers\PaymentController.cs:行号 159



 记录时间：2018-12-06 13:46:08,784 
日志级别：  ERROR 
出错类：Himall.Web.Areas.Mobile.Controllers.PaymentController.Pay  
错误描述：支付页面加载支付插件出错： 

System.ApplicationException: 预支付失败：JSAPI支付必须传openid
   在 Himall.Plugin.Payment.WeiXinPay.Service.GetRequestUrl(String returnUrl, String notifyUrl, String orderId, Decimal totalFee, String productInfo, String openId)
   在 Himall.Web.Areas.Mobile.Controllers.PaymentController.Pay(String pmtid, String ids) 位置 E:\合作项目\mall\Himall3.0\src\Himall.Web\Areas\Mobile\Controllers\PaymentController.cs:行号 159



 记录时间：2018-12-06 14:31:45,112 
日志级别：  ERROR 
出错类：Himall.Web.Areas.SellerAdmin.Controllers.ProductController.Create  
错误描述：创建商品失败 

System.Data.Entity.Validation.DbEntityValidationException: 对一个或多个实体的验证失败。有关详细信息，请参阅“EntityValidationErrors”属性。
   在 System.Data.Entity.Internal.InternalContext.SaveChanges()
   在 System.Data.Entity.Internal.LazyInternalContext.SaveChanges()
   在 System.Data.Entity.DbContext.SaveChanges()
   在 Himall.Service.ProductService.AddProduct(ProductInfo model) 位置 E:\合作项目\mall\Himall3.0\src\Himall.Service\Product\ProductService.cs:行号 280
   在 Himall.Service.ProductService.AddProduct(Int64 shopId, ProductInfo product, String[] pics, SKUInfo[] skus, ProductDescriptionInfo description, ProductAttributeInfo[] attributes, Int64[] goodsCategory, SellerSpecificationValueInfo[] sellerSpecifications, ProductLadderPricesInfo[] prices) 位置 E:\合作项目\mall\Himall3.0\src\Himall.Service\Product\ProductService.cs:行号 300
   在 Himall.Application.ProductManagerApplication.AddProduct(Int64 shopId, Product product, String[] pics, SKU[] skus, ProductDescription description, ProductAttribute[] attributes, Int64[] goodsCategory, SellerSpecificationValue[] sellerSpecifications, ProductLadderPrice[] prices) 位置 E:\合作项目\mall\Himall3.0\src\Himall.Application\ProductManagerApplication.cs:行号 56
   在 Himall.Web.Areas.SellerAdmin.Controllers.ProductController.Create(ProductCreateModel model, HttpPostedFileBase HPVY, HttpPostedFileBase HPVO) 位置 E:\合作项目\mall\Himall3.0\src\Himall.Web\Areas\SellerAdmin\Controllers\ProductController.cs:行号 201



 记录时间：2018-12-06 14:35:25,469 
日志级别：  ERROR 
出错类：Himall.Web.Areas.SellerAdmin.Controllers.ProductController.Create  
错误描述：创建商品失败 

System.Data.Entity.Validation.DbEntityValidationException: 对一个或多个实体的验证失败。有关详细信息，请参阅“EntityValidationErrors”属性。
   在 System.Data.Entity.Internal.InternalContext.SaveChanges()
   在 System.Data.Entity.Internal.LazyInternalContext.SaveChanges()
   在 System.Data.Entity.DbContext.SaveChanges()
   在 Himall.Service.ProductService.AddProduct(ProductInfo model) 位置 E:\合作项目\mall\Himall3.0\src\Himall.Service\Product\ProductService.cs:行号 280
   在 Himall.Service.ProductService.AddProduct(Int64 shopId, ProductInfo product, String[] pics, SKUInfo[] skus, ProductDescriptionInfo description, ProductAttributeInfo[] attributes, Int64[] goodsCategory, SellerSpecificationValueInfo[] sellerSpecifications, ProductLadderPricesInfo[] prices) 位置 E:\合作项目\mall\Himall3.0\src\Himall.Service\Product\ProductService.cs:行号 300
   在 Himall.Application.ProductManagerApplication.AddProduct(Int64 shopId, Product product, String[] pics, SKU[] skus, ProductDescription description, ProductAttribute[] attributes, Int64[] goodsCategory, SellerSpecificationValue[] sellerSpecifications, ProductLadderPrice[] prices) 位置 E:\合作项目\mall\Himall3.0\src\Himall.Application\ProductManagerApplication.cs:行号 56
   在 Himall.Web.Areas.SellerAdmin.Controllers.ProductController.Create(ProductCreateModel model, HttpPostedFileBase HPVY, HttpPostedFileBase HPVO) 位置 E:\合作项目\mall\Himall3.0\src\Himall.Web\Areas\SellerAdmin\Controllers\ProductController.cs:行号 201



 记录时间：2018-12-06 14:42:57,443 
日志级别：  ERROR 
出错类：Himall.Web.Areas.SellerAdmin.Controllers.ProductController.Create  
错误描述：创建商品失败 

System.Data.Entity.Validation.DbEntityValidationException: 对一个或多个实体的验证失败。有关详细信息，请参阅“EntityValidationErrors”属性。
   在 System.Data.Entity.Internal.InternalContext.SaveChanges()
   在 System.Data.Entity.Internal.LazyInternalContext.SaveChanges()
   在 System.Data.Entity.DbContext.SaveChanges()
   在 Himall.Service.ProductService.AddProduct(ProductInfo model) 位置 E:\合作项目\mall\Himall3.0\src\Himall.Service\Product\ProductService.cs:行号 280
   在 Himall.Service.ProductService.AddProduct(Int64 shopId, ProductInfo product, String[] pics, SKUInfo[] skus, ProductDescriptionInfo description, ProductAttributeInfo[] attributes, Int64[] goodsCategory, SellerSpecificationValueInfo[] sellerSpecifications, ProductLadderPricesInfo[] prices) 位置 E:\合作项目\mall\Himall3.0\src\Himall.Service\Product\ProductService.cs:行号 300
   在 Himall.Application.ProductManagerApplication.AddProduct(Int64 shopId, Product product, String[] pics, SKU[] skus, ProductDescription description, ProductAttribute[] attributes, Int64[] goodsCategory, SellerSpecificationValue[] sellerSpecifications, ProductLadderPrice[] prices) 位置 E:\合作项目\mall\Himall3.0\src\Himall.Application\ProductManagerApplication.cs:行号 56
   在 Himall.Web.Areas.SellerAdmin.Controllers.ProductController.Create(ProductCreateModel model, HttpPostedFileBase HPVY, HttpPostedFileBase HPVO) 位置 E:\合作项目\mall\Himall3.0\src\Himall.Web\Areas\SellerAdmin\Controllers\ProductController.cs:行号 201



 记录时间：2018-12-06 14:43:52,916 
日志级别：  ERROR 
出错类：Himall.Web.Areas.SellerAdmin.Controllers.ProductController.Create  
错误描述：创建商品失败 

System.Data.Entity.Validation.DbEntityValidationException: 对一个或多个实体的验证失败。有关详细信息，请参阅“EntityValidationErrors”属性。
   在 System.Data.Entity.Internal.InternalContext.SaveChanges()
   在 System.Data.Entity.Internal.LazyInternalContext.SaveChanges()
   在 System.Data.Entity.DbContext.SaveChanges()
   在 Himall.Service.ProductService.AddProduct(ProductInfo model) 位置 E:\合作项目\mall\Himall3.0\src\Himall.Service\Product\ProductService.cs:行号 280
   在 Himall.Service.ProductService.AddProduct(Int64 shopId, ProductInfo product, String[] pics, SKUInfo[] skus, ProductDescriptionInfo description, ProductAttributeInfo[] attributes, Int64[] goodsCategory, SellerSpecificationValueInfo[] sellerSpecifications, ProductLadderPricesInfo[] prices) 位置 E:\合作项目\mall\Himall3.0\src\Himall.Service\Product\ProductService.cs:行号 300
   在 Himall.Application.ProductManagerApplication.AddProduct(Int64 shopId, Product product, String[] pics, SKU[] skus, ProductDescription description, ProductAttribute[] attributes, Int64[] goodsCategory, SellerSpecificationValue[] sellerSpecifications, ProductLadderPrice[] prices) 位置 E:\合作项目\mall\Himall3.0\src\Himall.Application\ProductManagerApplication.cs:行号 56
   在 Himall.Web.Areas.SellerAdmin.Controllers.ProductController.Create(ProductCreateModel model, HttpPostedFileBase HPVY, HttpPostedFileBase HPVO) 位置 E:\合作项目\mall\Himall3.0\src\Himall.Web\Areas\SellerAdmin\Controllers\ProductController.cs:行号 201



 记录时间：2018-12-06 15:12:08,781 
日志级别：  ERROR 
出错类：Himall.Service.WXApiService.GetTicket  
错误描述：请求Ticket出错，强制刷新acess_token 

Senparc.Weixin.Exceptions.ErrorJsonResultException: 微信请求发生错误！错误代码：40013，说明：invalid appid hint: [FAt3AA0110hb96]
   在 Senparc.Weixin.HttpUtility.Get.GetJson[T](String url, Encoding encoding)
   在 Senparc.Weixin.MP.CommonAPIs.CommonApi.GetToken(String appid, String secret, String grant_type)
   在 Senparc.Weixin.MP.CommonAPIs.AccessTokenContainer.GetTokenResult(String appId, Boolean getNewToken)
   在 Senparc.Weixin.MP.CommonAPIs.AccessTokenContainer.GetToken(String appId, Boolean getNewToken)
   在 Himall.Service.WXApiService.TryGetToken(String appId, String appSecret, Boolean getNewToken) 位置 E:\合作项目\mall\Himall3.0\src\Himall.Service\Weixin\WXApiService.cs:行号 139
   在 Himall.Service.WXApiService.GetTicket(String appid, String appsecret) 位置 E:\合作项目\mall\Himall3.0\src\Himall.Service\Weixin\WXApiService.cs:行号 92



 记录时间：2018-12-06 15:12:22,890 
日志级别：  ERROR 
出错类：Himall.Service.WXApiService.GetTicket  
错误描述：请求Ticket出错，强制刷新acess_token 

Senparc.Weixin.Exceptions.ErrorJsonResultException: 微信请求发生错误！错误代码：40013，说明：invalid appid hint: [cnahJA01241512]
   在 Senparc.Weixin.HttpUtility.Get.GetJson[T](String url, Encoding encoding)
   在 Senparc.Weixin.MP.CommonAPIs.CommonApi.GetToken(String appid, String secret, String grant_type)
   在 Senparc.Weixin.MP.CommonAPIs.AccessTokenContainer.GetTokenResult(String appId, Boolean getNewToken)
   在 Senparc.Weixin.MP.CommonAPIs.AccessTokenContainer.GetToken(String appId, Boolean getNewToken)
   在 Himall.Service.WXApiService.TryGetToken(String appId, String appSecret, Boolean getNewToken) 位置 E:\合作项目\mall\Himall3.0\src\Himall.Service\Weixin\WXApiService.cs:行号 139
   在 Himall.Service.WXApiService.GetTicket(String appid, String appsecret) 位置 E:\合作项目\mall\Himall3.0\src\Himall.Service\Weixin\WXApiService.cs:行号 92



 记录时间：2018-12-06 15:13:30,137 
日志级别：  ERROR 
出错类：Himall.Service.WXApiService.GetTicket  
错误描述：请求Ticket出错，强制刷新acess_token 

Senparc.Weixin.Exceptions.ErrorJsonResultException: 微信请求发生错误！错误代码：40013，说明：invalid appid hint: [_ng0ya0191sha2]
   在 Senparc.Weixin.HttpUtility.Get.GetJson[T](String url, Encoding encoding)
   在 Senparc.Weixin.MP.CommonAPIs.CommonApi.GetToken(String appid, String secret, String grant_type)
   在 Senparc.Weixin.MP.CommonAPIs.AccessTokenContainer.GetTokenResult(String appId, Boolean getNewToken)
   在 Senparc.Weixin.MP.CommonAPIs.AccessTokenContainer.GetToken(String appId, Boolean getNewToken)
   在 Himall.Service.WXApiService.TryGetToken(String appId, String appSecret, Boolean getNewToken) 位置 E:\合作项目\mall\Himall3.0\src\Himall.Service\Weixin\WXApiService.cs:行号 139
   在 Himall.Service.WXApiService.GetTicket(String appid, String appsecret) 位置 E:\合作项目\mall\Himall3.0\src\Himall.Service\Weixin\WXApiService.cs:行号 92



 记录时间：2018-12-06 15:35:07,488 
日志级别：  ERROR 
出错类：Himall.Service.WXApiService.GetTicket  
错误描述：请求Ticket出错，强制刷新acess_token 

Senparc.Weixin.Exceptions.ErrorJsonResultException: 微信请求发生错误！错误代码：40013，说明：invalid appid hint: [wYjMfA04893055]
   在 Senparc.Weixin.HttpUtility.Get.GetJson[T](String url, Encoding encoding)
   在 Senparc.Weixin.MP.CommonAPIs.CommonApi.GetToken(String appid, String secret, String grant_type)
   在 Senparc.Weixin.MP.CommonAPIs.AccessTokenContainer.GetTokenResult(String appId, Boolean getNewToken)
   在 Senparc.Weixin.MP.CommonAPIs.AccessTokenContainer.GetToken(String appId, Boolean getNewToken)
   在 Himall.Service.WXApiService.TryGetToken(String appId, String appSecret, Boolean getNewToken) 位置 E:\合作项目\mall\Himall3.0\src\Himall.Service\Weixin\WXApiService.cs:行号 139
   在 Himall.Service.WXApiService.GetTicket(String appid, String appsecret) 位置 E:\合作项目\mall\Himall3.0\src\Himall.Service\Weixin\WXApiService.cs:行号 92



 记录时间：2018-12-06 15:47:08,054 
日志级别：  ERROR 
出错类：Himall.Web.Framework.BaseController.OnException  
错误描述：页面未捕获的异常：Area:Mobile,Controller:vshop,Action:detail,id:Get:post: 

System.ArgumentException: 对于“Himall.Web.Areas.Mobile.Controllers.VShopController”中方法“System.Web.Mvc.ActionResult Detail(Int64, System.Nullable`1[System.Int32], System.Nullable`1[System.Int32], Boolean, Int32, System.String)”的不可以为 null 的类型“System.Int64”的参数“id”，参数字典包含一个 null 项。可选参数必须为引用类型、可以为 null 的类型或声明为可选参数。
参数名: parameters
   在 System.Web.Mvc.ActionDescriptor.ExtractParameterFromDictionary(ParameterInfo parameterInfo, IDictionary`2 parameters, MethodInfo methodInfo)
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<BeginInvokeSynchronousActionMethod>b__39(IAsyncResult asyncResult, ActionInvocation innerInvokeState)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`2.CallEndDelegate(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3d()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass46.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3f()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass46.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3f()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass33.<BeginInvokeActionMethodWithFilters>b__32(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass21.<>c__DisplayClass2b.<BeginInvokeAction>b__1c()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass21.<BeginInvokeAction>b__1e(IAsyncResult asyncResult)
